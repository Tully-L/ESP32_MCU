这个代码实现了一个环境监测系统，主要功能如下：

1. **传感器监测**:
   - 温度（DHT11）
   - 湿度（DHT11）
   - 光照强度（BH1750）

2. **显示界面**（OLED显示屏，共4个页面）:
   - 页面0：实时数据显示（温度、湿度、光照）
   - 页面1：趋势图（显示三个参数的变化趋势）
   - 页面2：报警记录（显示最近3条报警信息）
   - 页面3：参数设置（显示采样周期和阈值设置）

3. **报警功能**:
   - 绿色LED：温度超限报警
   - 黄色LED：湿度超限报警
   - 红色LED：光照超限报警

4. **串口命令控制**:
   - `page0-3`: 切换显示页面
   - `scroll`: 开启/关闭自动循环显示
   - `home`: 返回首页
   - `TH/TL`: 设置温度上下限
   - `HH/HL`: 设置湿度上下限
   - `LH/LL`: 设置光照上下限
   - `history`: 显示报警历史
   - `[0-2][0-1]`: LED手动控制

5. **数据存储**:
   - 使用Preferences保存配置参数
   - 保存最近10条报警记录
   - 维护30个数据点的历史数据队列

6. **初始化动画**:
   - LED依次点亮的开机动画
   - OLED显示加载进度条动画

7. **自动循环显示**:
   - 可设置自动循环显示各个页面
   - 循环间隔3秒

这是一个完整的环境监测系统，具有数据采集、显示、报警、存储和控制功能。
---------------------------------------------------------------------
**系统功能详细说明**：

1. **硬件配置**：
   - ESP32 WeMos Loin开发板（GPIO配置）：
     - LED_Green: GPIO14
     - LED_Yellow: GPIO12
     - LED_Red: GPIO13
     - DHT11: GPIO15
     - OLED: SDA-GPIO5, SCL-GPIO4
     - BH1750: I2C接口共用

2. **数据采集**：
   - 采样周期：2秒
   - 采集数据：温度、湿度、光照
   - 数据队列：保存最近30组数据
   - 报警记录：保存最近10条报警数据

3. **显示界面**：
   - 第一屏（实时数据）：
     - 温度值（℃）
     - 湿度值（%）
     - 光照强度（lx）
   
   - 第二屏（趋势图）：
     - 温度曲线（实线）
     - 湿度曲线（虚线）
     - 光照曲线（点线）
     - 坐标轴和刻度显示
   
   - 第三屏（报警记录）：
     - 报警类型（T/H/L）
     - 报警数值
     - 报警时间（分钟）
   
   - 第四屏（参数设置）：
     - 采样周期显示
     - 温度阈值（上下限）
     - 湿度阈值（上下限）
     - 光照阈值（上下限）

4. **串口命令**：
   - 页面控制：
     - `page0-3`: 切换显示页面
     - `scroll`: 自动循环显示开关
     - `home`: 返回首页
   
   - 参数设置：
     - `TH/TL`: 温度上下限
     - `HH/HL`: 湿度上下限
     - `LH/LL`: 光照上下限
   
   - 其他功能：
     - `history`: 查看报警历史
     - `[0-2][0-1]`: LED手动控制

5. **报警机制**：
   - 温度报警（绿色LED）：
     - 上限：18.0℃
     - 下限：9.0℃
   
   - 湿度报警（黄色LED）：
     - 上限：60.0%
     - 下限：20.0%
   
   - 光照报警（红色LED）：
     - 上限：200.0 lx
     - 下限：10.0 lx

6. **数据存储**：
   - 配置参数保存在Preferences中
   - 报警记录持久化存储
   - 支持断电数据保护

7. **显示效果**：
   - OLED分辨率：128x64
   - 字体：ArialMT_Plain_10/24
   - 支持图形、文字混合显示
   - 页码显示在右下角
--------------------------------------------------------------------

串口命令说明：
·  第一位（0-2）：LED选择
·  0 = 绿灯
·  1 = 黄灯
·  2 = 红灯
·  第二位（0-1）：开关状态
·  0 = 关闭
·  1 = 打开

如果当前手动的控制与程序：// LED控制逻辑
// 光照小于50，打开红灯
digitalWrite(LED_Red, (lux < 50) ? HIGH : LOW);

// 温度大于16°C，打开绿灯
digitalWrite(LED_Green, (t > 16.0) ? HIGH : LOW);

// 湿度大于80%，打开黄灯
digitalWrite(LED_Yellow, (h > 80.0) ? HIGH : LOW);冲突，则闪烁两下当前控制的灯，最后以程序逻辑决定指定灯的暗灭。

处理机制：
·  命令与自动控制逻辑冲突时会闪烁两次
·  冲突后恢复自动控制
·  其他所有功能（传感器读取、显示等）维持原样
·  新增了串口反馈信息，便于确认命令是否正确执行

这种冲突处理机制的核心思想是：
·  及时提醒用户存在冲突（LED闪烁）
·  优先考虑安全和保护（恢复自动控制）
·  平衡自动化和人工干预
·  确保系统可靠运行
例如：
·  安防系统：
·  自动模式：夜间自动开启照明
·  手动控制：保安手动关闭某区域灯光
·  冲突情况：系统检测到黑暗要开灯，但保安刚关闭
·  处理方式：提示冲突后优先保证安全照明

·  智能家居系统：
·  自动模式：根据光照自动控制窗帘
·  手动控制：用户手动操作窗帘
·  冲突情况：比如系统检测到强光要自动关窗帘，但用户刚手动打开窗帘
·  处理方式：闪烁提示用户存在冲突，然后回归自动模式
-------------------------------------------------------------------

Flash存储报警数据

查看flash中保存的报警记录，有两种方法：
1. 使用串口命令"history"：
```
// 在串口监视器中输入 history 并发送
// 将显示格式如下：
Alarm History:
1: T=26.5 at 120 sec
2: H=85.2 at 100 sec
3: L=45.0 at 80 sec
...
```

2. 通过代码中的报警触发时实时打印：
```
// 当发生报警时，会自动打印，格式如：
Alarm: T=26.5 at 120 sec  // T代表温度报警
Alarm: H=85.2 at 100 sec  // H代表湿度报警
Alarm: L=45.0 at 80 sec   // L代表光照报警
```

测试步骤：
1. 触发报警：
   - 用手捂热DHT11传感器（温度报警）
   - 对DHT11呼气（湿度报警）
   - 遮挡光照传感器（光照报警）

2. 验证存储：
   - 断电重启
   - 输入"history"命令
   - 确认之前的报警记录仍然存在

3. 注意事项：
   - 最多保存10条报警记录
   - 新报警会覆盖最旧的记录
   - 时间戳单位为秒（从设备启动开始计时）
